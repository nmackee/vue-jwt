{"remainingRequest":"/Users/makiuranobuhiro/Documents/vue-jwt/frontend/node_modules/babel-loader/lib/index.js!/Users/makiuranobuhiro/Documents/vue-jwt/frontend/node_modules/eslint-loader/index.js??ref--14-0!/Users/makiuranobuhiro/Documents/vue-jwt/frontend/src/appRouter.js","dependencies":[{"path":"/Users/makiuranobuhiro/Documents/vue-jwt/frontend/src/appRouter.js","mtime":1636953860966},{"path":"/Users/makiuranobuhiro/Documents/vue-jwt/frontend/babel.config.js","mtime":1636888746882},{"path":"/Users/makiuranobuhiro/Documents/vue-jwt/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1622550714550},{"path":"/Users/makiuranobuhiro/Documents/vue-jwt/frontend/node_modules/babel-loader/lib/index.js","mtime":1634801961354},{"path":"/Users/makiuranobuhiro/Documents/vue-jwt/frontend/node_modules/eslint-loader/index.js","mtime":1622550719443}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9tYWtpdXJhbm9idWhpcm8vRG9jdW1lbnRzL3Z1ZS1qd3QvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBMb2dpbiBmcm9tICIuL2NvbXBvbmVudHMvTG9naW4udnVlIjsKaW1wb3J0IERhc2hib2FyZCBmcm9tICIuL2NvbXBvbmVudHMvRGFzaGJvYXJkLnZ1ZSI7CmltcG9ydCB7IGNyZWF0ZVJvdXRlciwgY3JlYXRlV2ViSGlzdG9yeSB9IGZyb20gInZ1ZS1yb3V0ZXIiOwppbXBvcnQgc3RvcmUgZnJvbSAiLi9zdG9yZS9pbmRleCI7CnZhciByb3V0ZXMgPSBbewogIHBhdGg6ICIvIiwKICBjb21wb25lbnQ6IExvZ2luLAogIG1ldGE6IHsKICAgIHJlcXVpcmVkQXV0aDogdHJ1ZQogIH0KfSwgewogIHBhdGg6ICIvbG9naW4iLAogIGNvbXBvbmVudDogTG9naW4sCiAgbWV0YTogewogICAgcmVxdWlyZWRBdXRoOiBmYWxzZQogIH0KfSwgewogIHBhdGg6ICIvZGFzaGJvYXJkIiwKICBjb21wb25lbnQ6IERhc2hib2FyZCwKICBtZXRhOiB7CiAgICByZXF1aXJlZEF1dGg6IHRydWUKICB9Cn1dOwpleHBvcnQgdmFyIHJvdXRlQ29uZmlnID0gY3JlYXRlUm91dGVyKHsKICBoaXN0b3J5OiBjcmVhdGVXZWJIaXN0b3J5KCksCiAgcm91dGVzOiByb3V0ZXMKfSk7CnJvdXRlQ29uZmlnLmJlZm9yZUVhY2goIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUodG8sIGZyb20sIG5leHQpIHsKICAgIHZhciB1c2VyUHJvZmlsZSwgaXNBdXRoZW50aWNhdGVkOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICB1c2VyUHJvZmlsZSA9IHN0b3JlLmdldHRlcnNbImF1dGgvZ2V0VXNlclByb2ZpbGUiXTsKICAgICAgICAgICAgaXNBdXRoZW50aWNhdGVkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImlzQXV0aGVudGljYXRlZCIpOwoKICAgICAgICAgICAgaWYgKCEodXNlclByb2ZpbGUuaWQgPT09IDAgJiYgaXNBdXRoZW50aWNhdGVkKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdhdXRoL3VzZXJQcm9maWxlJyk7CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICB1c2VyUHJvZmlsZSA9IHN0b3JlLmdldHRlcnNbImF1dGgvZ2V0VXNlclByb2ZpbGUiXTsKCiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIGlmICghdG8ubWV0YS5yZXF1aXJlZEF1dGgpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghKHVzZXJQcm9maWxlLmlkID09PSAwKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBuZXh0KHsKICAgICAgICAgICAgICBwYXRoOiAiL2xvZ2luIgogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTM7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIGlmICghKHVzZXJQcm9maWxlLmlkICE9PSAwKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgbmV4dCh7CiAgICAgICAgICAgICAgcGF0aDogIi9kYXNoYm9hcmQiCiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBuZXh0KCkpOwoKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIsIF94MykgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCkpOw=="},{"version":3,"sources":["/Users/makiuranobuhiro/Documents/vue-jwt/frontend/src/appRouter.js"],"names":["Login","Dashboard","createRouter","createWebHistory","store","routes","path","component","meta","requiredAuth","routeConfig","history","beforeEach","to","from","next","userProfile","getters","isAuthenticated","localStorage","getItem","id","dispatch"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,wBAAlB;AACA,OAAOC,SAAP,MAAsB,4BAAtB;AACA,SAASC,YAAT,EAAuBC,gBAAvB,QAA+C,YAA/C;AACA,OAAOC,KAAP,MAAkB,eAAlB;AAEA,IAAMC,MAAM,GAAG,CACb;AAAEC,EAAAA,IAAI,EAAE,GAAR;AAAaC,EAAAA,SAAS,EAAEP,KAAxB;AAA+BQ,EAAAA,IAAI,EAAE;AAACC,IAAAA,YAAY,EAAE;AAAf;AAArC,CADa,EAEb;AAAEH,EAAAA,IAAI,EAAE,QAAR;AAAkBC,EAAAA,SAAS,EAAEP,KAA7B;AAAoCQ,EAAAA,IAAI,EAAE;AAACC,IAAAA,YAAY,EAAE;AAAf;AAA1C,CAFa,EAGb;AAAEH,EAAAA,IAAI,EAAE,YAAR;AAAsBC,EAAAA,SAAS,EAAEN,SAAjC;AAA4CO,EAAAA,IAAI,EAAE;AAACC,IAAAA,YAAY,EAAE;AAAf;AAAlD,CAHa,CAAf;AAMA,OAAO,IAAMC,WAAW,GAAGR,YAAY,CAAC;AACpCS,EAAAA,OAAO,EAAER,gBAAgB,EADW;AAEpCE,EAAAA,MAAM,EAAEA;AAF4B,CAAD,CAAhC;AAKPK,WAAW,CAACE,UAAZ;AAAA,qEAAuB,iBAAOC,EAAP,EAAWC,IAAX,EAAiBC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAEjBC,YAAAA,WAFiB,GAEHZ,KAAK,CAACa,OAAN,CAAc,qBAAd,CAFG;AAGjBC,YAAAA,eAHiB,GAGCC,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAHD;;AAAA,kBAIlBJ,WAAW,CAACK,EAAZ,KAAmB,CAAnB,IAAwBH,eAJN;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAKbd,KAAK,CAACkB,QAAN,CAAe,kBAAf,CALa;;AAAA;AAMnBN,YAAAA,WAAW,GAAGZ,KAAK,CAACa,OAAN,CAAc,qBAAd,CAAd;;AANmB;AAAA,iBASlBJ,EAAE,CAACL,IAAH,CAAQC,YATU;AAAA;AAAA;AAAA;;AAAA,kBAUhBO,WAAW,CAACK,EAAZ,KAAmB,CAVH;AAAA;AAAA;AAAA;;AAAA,6CAWRN,IAAI,CAAC;AAACT,cAAAA,IAAI,EAAE;AAAP,aAAD,CAXI;;AAAA;AAAA;AAAA;;AAAA;AAAA,kBAchBU,WAAW,CAACK,EAAZ,KAAmB,CAdH;AAAA;AAAA;AAAA;;AAAA,6CAeVN,IAAI,CAAC;AAAET,cAAAA,IAAI,EAAE;AAAR,aAAD,CAfM;;AAAA;AAAA,6CAkBdS,IAAI,EAlBU;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAvB;;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import Login from \"./components/Login.vue\";\nimport Dashboard from \"./components/Dashboard.vue\";\nimport { createRouter, createWebHistory } from \"vue-router\";\nimport store from \"./store/index\";\n \nconst routes = [\n  { path: \"/\", component: Login, meta: {requiredAuth: true} },\n  { path: \"/login\", component: Login, meta: {requiredAuth: false} },\n  { path: \"/dashboard\", component: Dashboard, meta: {requiredAuth: true} },\n];\n \nexport const routeConfig = createRouter({\n    history: createWebHistory(),\n    routes: routes\n});\n\nrouteConfig.beforeEach(async (to, from, next) => {\n\n  let userProfile = store.getters[\"auth/getUserProfile\"];\n  let isAuthenticated = localStorage.getItem(\"isAuthenticated\");\n  if(userProfile.id === 0 && isAuthenticated) {\n    await store.dispatch('auth/userProfile');\n    userProfile = store.getters[\"auth/getUserProfile\"];\n  }\n\n  if(to.meta.requiredAuth) {\n    if(userProfile.id === 0) {\n        return next({path: \"/login\"});\n    }\n  }else {\n    if(userProfile.id !== 0){\n      return next({ path: \"/dashboard\"});\n    }\n  }\n  return next();\n  \n});"]}]}