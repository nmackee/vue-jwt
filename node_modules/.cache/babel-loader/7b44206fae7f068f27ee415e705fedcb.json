{"remainingRequest":"/Users/makiuranobuhiro/Documents/vue-jwt/frontend/node_modules/babel-loader/lib/index.js!/Users/makiuranobuhiro/Documents/vue-jwt/frontend/node_modules/eslint-loader/index.js??ref--14-0!/Users/makiuranobuhiro/Documents/vue-jwt/frontend/src/shared/jwt.interceptor.js","dependencies":[{"path":"/Users/makiuranobuhiro/Documents/vue-jwt/frontend/src/shared/jwt.interceptor.js","mtime":1636956366496},{"path":"/Users/makiuranobuhiro/Documents/vue-jwt/frontend/babel.config.js","mtime":1636888746882},{"path":"/Users/makiuranobuhiro/Documents/vue-jwt/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1622550714550},{"path":"/Users/makiuranobuhiro/Documents/vue-jwt/frontend/node_modules/babel-loader/lib/index.js","mtime":1634801961354},{"path":"/Users/makiuranobuhiro/Documents/vue-jwt/frontend/node_modules/eslint-loader/index.js","mtime":1622550719443}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9tYWtpdXJhbm9idWhpcm8vRG9jdW1lbnRzL3Z1ZS1qd3QvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwp2YXIgand0SW50ZXJjZXB0b3IgPSBheGlvcy5jcmVhdGUoe30pOwpqd3RJbnRlcmNlcHRvci5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIHJldHVybiBjb25maWc7Cn0pOwpqd3RJbnRlcmNlcHRvci5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIHJldHVybiByZXNwb25zZTsKfSwgLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShlcnJvcikgewogICAgdmFyIHJlc3BvbnNlOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpZiAoIShlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMSkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KCJodHRwOi8vbG9jYWxob3N0OjMwMDAvcmVmcmVzaC10b2tlbiIsIHsKICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUKICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICBpZiAoIShyZXNwb25zZSAmJiByZXNwb25zZS5kYXRhKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBheGlvcyhlcnJvci5jb25maWcpKTsKCiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KGVycm9yKSk7CgogICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KGVycm9yKSk7CgogICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpKTsKZXhwb3J0IGRlZmF1bHQgand0SW50ZXJjZXB0b3I7"},{"version":3,"sources":["/Users/makiuranobuhiro/Documents/vue-jwt/frontend/src/shared/jwt.interceptor.js"],"names":["axios","jwtInterceptor","create","interceptors","request","use","config","response","error","status","get","withCredentials","catch","Promise","reject","data"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,IAAMC,cAAc,GAAGD,KAAK,CAACE,MAAN,CAAa,EAAb,CAAvB;AAEAD,cAAc,CAACE,YAAf,CAA4BC,OAA5B,CAAoCC,GAApC,CAAwC,UAACC,MAAD,EAAY;AAClD,SAAOA,MAAP;AACD,CAFD;AAIAL,cAAc,CAACE,YAAf,CAA4BI,QAA5B,CAAqCF,GAArC,CACE,UAACE,QAAD,EAAc;AACZ,SAAOA,QAAP;AACD,CAHH;AAAA,qEAIE,iBAAOC,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACKA,KAAK,CAACD,QAAN,CAAeE,MAAf,KAA0B,GAD/B;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAEyBT,KAAK,CAACU,GAAN,CACnB,qCADmB,EACoB;AAACC,cAAAA,eAAe,EAAE;AAAlB,aADpB,EAEpBC,KAFoB,CAEd,UAACJ,KAAD,EAAW;AAChB,qBAAOK,OAAO,CAACC,MAAR,CAAeN,KAAf,CAAP;AACD,aAJoB,CAFzB;;AAAA;AAEQD,YAAAA,QAFR;;AAAA,kBAOOA,QAAQ,IAAIA,QAAQ,CAACQ,IAP5B;AAAA;AAAA;AAAA;;AAAA,6CAQaf,KAAK,CAACQ,KAAK,CAACF,MAAP,CARlB;;AAAA;AAAA,6CAWaO,OAAO,CAACC,MAAR,CAAeN,KAAf,CAXb;;AAAA;AAAA;AAAA;;AAAA;AAAA,6CAeWK,OAAO,CAACC,MAAR,CAAeN,KAAf,CAfX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAJF;;AAAA;AAAA;AAAA;AAAA;AAwBA,eAAeP,cAAf","sourcesContent":["import axios from 'axios';\n\nconst jwtInterceptor = axios.create({});\n\njwtInterceptor.interceptors.request.use((config) => {\n  return config;\n});\n\njwtInterceptor.interceptors.response.use(\n  (response) => {\n    return response;\n  },\n  async (error) => {\n    if(error.response.status === 401) {\n      var response = await axios.get(\n        \"http://localhost:3000/refresh-token\", {withCredentials: true,})\n      .catch((error) => {\n        return Promise.reject(error);\n      });\n      if(response && response.data) {\n        return axios(error.config)\n      }\n      else{\n        return Promise.reject(error);\n      }\n    }\n    else{\n      return Promise.reject(error);\n    }\n  }\n)\n\nexport default jwtInterceptor;"]}]}