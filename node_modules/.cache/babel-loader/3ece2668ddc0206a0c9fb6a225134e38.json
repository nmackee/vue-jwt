{"remainingRequest":"/Users/makiuranobuhiro/Documents/vue-jwt/frontend/node_modules/babel-loader/lib/index.js!/Users/makiuranobuhiro/Documents/vue-jwt/frontend/node_modules/eslint-loader/index.js??ref--14-0!/Users/makiuranobuhiro/Documents/vue-jwt/frontend/src/store/modules/auth.js","dependencies":[{"path":"/Users/makiuranobuhiro/Documents/vue-jwt/frontend/src/store/modules/auth.js","mtime":1636956565498},{"path":"/Users/makiuranobuhiro/Documents/vue-jwt/frontend/babel.config.js","mtime":1636888746882},{"path":"/Users/makiuranobuhiro/Documents/vue-jwt/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1622550714550},{"path":"/Users/makiuranobuhiro/Documents/vue-jwt/frontend/node_modules/babel-loader/lib/index.js","mtime":1634801961354},{"path":"/Users/makiuranobuhiro/Documents/vue-jwt/frontend/node_modules/eslint-loader/index.js","mtime":1622550719443}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9tYWtpdXJhbm9idWhpcm8vRG9jdW1lbnRzL3Z1ZS1qd3QvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBqd3RJbnRlcmNlcHRvciBmcm9tICIuLi8uLi9zaGFyZWQvand0LmludGVyY2VwdG9yIjsKCnZhciBzdGF0ZSA9IGZ1bmN0aW9uIHN0YXRlKCkgewogIHJldHVybiB7CiAgICBsb2dpbkFwaVN0YXR1czogIiIsCiAgICB1c2VyUHJvZmlsZTogewogICAgICBpZDogMCwKICAgICAgbGFzdE5hbWU6ICIiLAogICAgICBmaXJzdE5hbWU6ICIiLAogICAgICBlbWFpbDogIiIsCiAgICAgIHBob25lOiAiIgogICAgfSwKICAgIGxvZ091dDogZmFsc2UKICB9Owp9OwoKdmFyIGdldHRlcnMgPSB7CiAgZ2V0TG9naW5BcGlTdGF0dXM6IGZ1bmN0aW9uIGdldExvZ2luQXBpU3RhdHVzKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUubG9naW5BcGlTdGF0dXM7CiAgfSwKICBnZXRVc2VyUHJvZmlsZTogZnVuY3Rpb24gZ2V0VXNlclByb2ZpbGUoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS51c2VyUHJvZmlsZTsKICB9LAogIGdldExvZ291dDogZnVuY3Rpb24gZ2V0TG9nb3V0KHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUubG9nT3V0OwogIH0KfTsKdmFyIGFjdGlvbnMgPSB7CiAgbG9naW5BcGk6IGZ1bmN0aW9uIGxvZ2luQXBpKF9yZWYsIHBheWxvYWQpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBjb21taXQsIHJlc3BvbnNlOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hdXRoL2xvZ2luIiwgcGF5bG9hZCwgewogICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLAogICAgICAgICAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJwogICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuZGF0YSkgewogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImlzQXV0aGVudGljYXRlZCIsICJ0cnVlIik7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldExvZ2luQXBpU3RhdHVzJywgJ3N1Y2Nlc3MnKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY29tbWl0KCdzZXRMb2dpbkFwaVN0YXR1cycsICdmYWlsZWQnKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICB1c2VyUHJvZmlsZTogZnVuY3Rpb24gdXNlclByb2ZpbGUoX3JlZjIpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICB2YXIgY29tbWl0LCByZXNwb25zZTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBqd3RJbnRlcmNlcHRvci5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC91c2VyLXByb2ZpbGUiLCB7CiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUsCiAgICAgICAgICAgICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnCiAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuZGF0YSkgewogICAgICAgICAgICAgICAgY29tbWl0KCdzZXRVc2VyUHJvZmlsZScsIHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKSgpOwogIH0sCiAgdXNlckxvZ291dDogZnVuY3Rpb24gdXNlckxvZ291dChfcmVmMykgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgIHZhciBjb21taXQsIHJlc3BvbnNlOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYzLmNvbW1pdDsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLmdldCgiaHR0cDovL2xvY2FsaG9zdDozMDAwL2xvZ291dCIsIHsKICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSwKICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScKICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICAgICAgICBjb21taXQoInNldExvZ291dCIsIHRydWUpOwogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oImlzQXV0aGVudGljYXRlZCIpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb21taXQoInNldExvZ291dCIsIGZhbHNlKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMyk7CiAgICB9KSkoKTsKICB9Cn07CnZhciBtdXRhdGlvbnMgPSB7CiAgc2V0TG9naW5BcGlTdGF0dXM6IGZ1bmN0aW9uIHNldExvZ2luQXBpU3RhdHVzKHN0YXRlLCBkYXRhKSB7CiAgICBzdGF0ZS5sb2dpbkFwaVN0YXR1cyA9IGRhdGE7CiAgfSwKICBzZXRVc2VyUHJvZmlsZTogZnVuY3Rpb24gc2V0VXNlclByb2ZpbGUoc3RhdGUsIGRhdGEpIHsKICAgIHN0YXRlLnVzZXJQcm9maWxlID0gewogICAgICBpZDogZGF0YS5pZCwKICAgICAgbGFzdE5hbWU6IGRhdGEubGFzdE5hbWUsCiAgICAgIGZpcnN0TmFtZTogZGF0YS5maXJzdE5hbWUsCiAgICAgIGVtYWlsOiBkYXRhLmVtYWlsLAogICAgICBwaG9uZTogZGF0YS5waG9uZQogICAgfTsKICB9LAogIHNldExvZ291dDogZnVuY3Rpb24gc2V0TG9nb3V0KHN0YXRlLCBwYXlsb2FkKSB7CiAgICBzdGF0ZS5sb2dPdXQgPSBwYXlsb2FkOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHN0YXRlLAogIGdldHRlcnM6IGdldHRlcnMsCiAgYWN0aW9uczogYWN0aW9ucywKICBtdXRhdGlvbnM6IG11dGF0aW9ucwp9Ow=="},{"version":3,"sources":["/Users/makiuranobuhiro/Documents/vue-jwt/frontend/src/store/modules/auth.js"],"names":["axios","jwtInterceptor","state","loginApiStatus","userProfile","id","lastName","firstName","email","phone","logOut","getters","getLoginApiStatus","getUserProfile","getLogout","actions","loginApi","payload","commit","post","withCredentials","credentials","catch","err","console","log","response","data","localStorage","setItem","get","userLogout","removeItem","mutations","setLoginApiStatus","setUserProfile","setLogout","namespaced"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,cAAP,MAA2B,8BAA3B;;AAEA,IAAMC,KAAK,GAAG,SAARA,KAAQ;AAAA,SAAO;AACnBC,IAAAA,cAAc,EAAE,EADG;AAEnBC,IAAAA,WAAW,EAAE;AACXC,MAAAA,EAAE,EAAE,CADO;AAEXC,MAAAA,QAAQ,EAAE,EAFC;AAGXC,MAAAA,SAAS,EAAE,EAHA;AAIXC,MAAAA,KAAK,EAAE,EAJI;AAKXC,MAAAA,KAAK,EAAE;AALI,KAFM;AASnBC,IAAAA,MAAM,EAAE;AATW,GAAP;AAAA,CAAd;;AAYA,IAAMC,OAAO,GAAG;AACdC,EAAAA,iBADc,6BACIV,KADJ,EACW;AACvB,WAAOA,KAAK,CAACC,cAAb;AACD,GAHa;AAIdU,EAAAA,cAJc,0BAICX,KAJD,EAIQ;AACpB,WAAOA,KAAK,CAACE,WAAb;AACD,GANa;AAOdU,EAAAA,SAPc,qBAOJZ,KAPI,EAOG;AACf,WAAOA,KAAK,CAACQ,MAAb;AACD;AATa,CAAhB;AAYA,IAAMK,OAAO,GAAG;AACRC,EAAAA,QADQ,0BACWC,OADX,EACoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAlBC,cAAAA,MAAkB,QAAlBA,MAAkB;AAAA;AAAA,qBACTlB,KAAK,CACzBmB,IADoB,CACf,kCADe,EAElBF,OAFkB,EAET;AAACG,gBAAAA,eAAe,EAAE,IAAlB;AAAwBC,gBAAAA,WAAW,EAAE;AAArC,eAFS,EAGpBC,KAHoB,CAGd,UAACC,GAAD,EAAS;AACdC,gBAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,eALoB,CADS;;AAAA;AAC1BG,cAAAA,QAD0B;;AAOhC,kBAAGA,QAAQ,IAAIA,QAAQ,CAACC,IAAxB,EAA8B;AAC5BC,gBAAAA,YAAY,CAACC,OAAb,CAAqB,iBAArB,EAAwC,MAAxC;AACAX,gBAAAA,MAAM,CAAC,mBAAD,EAAsB,SAAtB,CAAN;AAED,eAJD,MAKI;AACFA,gBAAAA,MAAM,CAAC,mBAAD,EAAsB,QAAtB,CAAN;AACD;;AAd+B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAejC,GAhBa;AAkBRd,EAAAA,WAlBQ,8BAkBc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAATc,cAAAA,MAAS,SAATA,MAAS;AAAA;AAAA,qBACHjB,cAAc,CAClC6B,GADoB,CAChB,oCADgB,EAElB;AAACV,gBAAAA,eAAe,EAAE,IAAlB;AAAwBC,gBAAAA,WAAW,EAAE;AAArC,eAFkB,EAGpBC,KAHoB,CAGd,UAACC,GAAD,EAAS;AACdC,gBAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,eALoB,CADG;;AAAA;AACpBG,cAAAA,QADoB;;AAQxB,kBAAGA,QAAQ,IAAIA,QAAQ,CAACC,IAAxB,EAA8B;AAC5BT,gBAAAA,MAAM,CAAC,gBAAD,EAAmBQ,QAAQ,CAACC,IAA5B,CAAN;AACD;;AAVuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAW3B,GA7Ba;AA+BRI,EAAAA,UA/BQ,6BA+Ba;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAATb,cAAAA,MAAS,SAATA,MAAS;AAAA;AAAA,qBACFlB,KAAK,CACzB8B,GADoB,CAChB,8BADgB,EAElB;AAACV,gBAAAA,eAAe,EAAE,IAAlB;AAAwBC,gBAAAA,WAAW,EAAE;AAArC,eAFkB,EAGpBC,KAHoB,CAGd,UAACC,GAAD,EAAS;AACdC,gBAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,eALoB,CADE;;AAAA;AACnBG,cAAAA,QADmB;;AAQvB,kBAAGA,QAAQ,IAAIA,QAAQ,CAACC,IAAxB,EAA8B;AAC5BT,gBAAAA,MAAM,CAAC,WAAD,EAAc,IAAd,CAAN;AACAU,gBAAAA,YAAY,CAACI,UAAb,CAAwB,iBAAxB;AAED,eAJD,MAKI;AACFd,gBAAAA,MAAM,CAAC,WAAD,EAAc,KAAd,CAAN;AACD;;AAfsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgB1B;AA/Ca,CAAhB;AAkDA,IAAMe,SAAS,GAAG;AAChBC,EAAAA,iBADgB,6BACEhC,KADF,EACSyB,IADT,EACe;AAC7BzB,IAAAA,KAAK,CAACC,cAAN,GAAuBwB,IAAvB;AACD,GAHe;AAIhBQ,EAAAA,cAJgB,0BAIDjC,KAJC,EAIMyB,IAJN,EAIY;AAC1BzB,IAAAA,KAAK,CAACE,WAAN,GAAoB;AAClBC,MAAAA,EAAE,EAAEsB,IAAI,CAACtB,EADS;AAElBC,MAAAA,QAAQ,EAAEqB,IAAI,CAACrB,QAFG;AAGlBC,MAAAA,SAAS,EAAEoB,IAAI,CAACpB,SAHE;AAIlBC,MAAAA,KAAK,EAAEmB,IAAI,CAACnB,KAJM;AAKlBC,MAAAA,KAAK,EAAEkB,IAAI,CAAClB;AALM,KAApB;AAQD,GAbe;AAchB2B,EAAAA,SAdgB,qBAcNlC,KAdM,EAcCe,OAdD,EAcU;AACxBf,IAAAA,KAAK,CAACQ,MAAN,GAAeO,OAAf;AACD;AAhBe,CAAlB;AAoBA,eAAe;AACboB,EAAAA,UAAU,EAAE,IADC;AAEbnC,EAAAA,KAAK,EAALA,KAFa;AAGbS,EAAAA,OAAO,EAAPA,OAHa;AAIbI,EAAAA,OAAO,EAAPA,OAJa;AAKbkB,EAAAA,SAAS,EAATA;AALa,CAAf","sourcesContent":["import axios from \"axios\";\nimport jwtInterceptor from \"../../shared/jwt.interceptor\";\n\nconst state = () => ({\n  loginApiStatus: \"\",\n  userProfile: {\n    id: 0,\n    lastName: \"\",\n    firstName: \"\",\n    email: \"\",\n    phone: \"\",\n  },\n  logOut: false,\n});\n\nconst getters = {\n  getLoginApiStatus(state) {\n    return state.loginApiStatus;\n  },\n  getUserProfile(state) {\n    return state.userProfile;\n  },\n  getLogout(state) {\n    return state.logOut\n  }\n};\n\nconst actions = {\n  async loginApi({commit}, payload) {\n    const response = await axios\n      .post(\"http://localhost:3000/auth/login\",\n         payload, {withCredentials: true, credentials: 'include'})\n      .catch((err) => {\n        console.log(err);\n      });\n    if(response && response.data) {\n      localStorage.setItem(\"isAuthenticated\", \"true\");\n      commit('setLoginApiStatus', 'success');\n      \n    }\n    else{\n      commit('setLoginApiStatus', 'failed');\n    }\n  },\n\n  async userProfile({commit}) {\n    const response = await jwtInterceptor\n      .get(\"http://localhost:3000/user-profile\",\n         {withCredentials: true, credentials: 'include'})\n      .catch((err) => {\n        console.log(err);\n      });\n\n      if(response && response.data) {\n        commit('setUserProfile', response.data)\n      }\n  },\n\n  async userLogout({commit}) {\n    const response = await axios\n      .get(\"http://localhost:3000/logout\",\n         {withCredentials: true, credentials: 'include'})\n      .catch((err) => {\n        console.log(err);\n      });\n\n      if(response && response.data) {\n        commit(\"setLogout\", true)\n        localStorage.removeItem(\"isAuthenticated\");\n        \n      }\n      else{\n        commit(\"setLogout\", false)\n      }\n  }\n};\n\nconst mutations = {\n  setLoginApiStatus(state, data) {\n    state.loginApiStatus = data;\n  },\n  setUserProfile(state, data) {\n    state.userProfile = {\n      id: data.id,\n      lastName: data.lastName,\n      firstName: data.firstName,\n      email: data.email,\n      phone: data.phone,\n    };\n\n  },\n  setLogout(state, payload) {\n    state.logOut = payload\n  }\n\n};\n\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  actions,\n  mutations,\n};"]}]}